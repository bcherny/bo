!function(a,b){"function"==typeof define&&define.amd?define("Bo",["izzy","umodel"],function(c,d){return a.Bo=b(c,d)}):"object"==typeof exports?module.exports=b(require("izzy"),require("umodel")):a.Bo=b(izzy,umodel)}(this,function(a,b){var c,d=[].slice;c={each:function(b,c){var d,e,f,g,h,i;if(a.array(b)){for(h=[],d=f=0,g=b.length;g>f;d=++f)e=b[d],h.push(c(e,d));return h}if(a.object(b)){i=[];for(d in b)e=b[d],i.push(c(e,d));return i}},extend:function(){var a,b,c,e,f,g;if(b=arguments[0],e=2<=arguments.length?d.call(arguments,1):[],b&&e)for(f=0,g=e.length;g>f;f++){c=e[f];for(a in c)b[a]=c[a]}return b},fluent:function(a){return function(){return a.apply(this,arguments),this}},one:function(a){var b;for(b in a)return b}};var e,f=function(a,b){return function(){return a.apply(b,arguments)}},d=[].slice;e=function(){function e(){var b,e;e=arguments[0],b=2<=arguments.length?d.call(arguments,1):[],this.on=f(this.on,this),this.element=e||document,a.object(this.events)&&c.each(this.events,this.on),a["function"](this.initialize)&&this.initialize.apply(this,b)}return e.prototype.events={},e.prototype.model=new b,e.prototype.initialize=function(){},e.prototype.on=function(a,b){var c,d,e,f,g;for(d=b.split(" "),g=[],e=0,f=d.length;f>e;e++)c=d[e],g.push(this.element.addEventListener(c,this[a]));return g},e}();var g,f=function(a,b){return function(){return a.apply(b,arguments)}};g=function(){function a(a){var b,c,d;this.options=a,this.clearAnimation=f(this.clearAnimation,this),++this.factory.counter,b=this.options.element,c=this.options.html,d=b?b.getAttribute(this.options.paneAttribute):void 0,this.id=this.options.id||d||this.factory.id(),this.element=b||this.factory.create(),this.index=this.options.index||this.factory.counter,this.element.setAttribute(this.options.paneAttribute,this.id),c&&(this.element.innerHTML=c)}return a.prototype.id=null,a.prototype.element=null,a.prototype.factory={counter:0,create:function(){var a;return a=document.createElement("div"),a.setAttribute("data-bo-pane",this.id()),document.body.appendChild(a),a},id:function(){return"pane-"+this.counter}},a.prototype.clearAnimation=function(){return this.element.classList.remove("animate")},a.prototype.animate=function(a){var b,c,d,e,f=this;return e=null!=a?a:{direction:"left",instant:!1},b=e.direction,c=e.instant,d=["center","left","right"].filter(function(a){return a!==b}),new Promise(function(a){var e,g;return f.element.classList.remove("hidden"),g=function(){return f.element.removeEventListener(g),e(),a()},e=function(){return f.element.classList.remove("animate-"+b),d.forEach(function(a){return f.element.classList.remove(a)}),f.element.classList.add(b),f.element.classList.add("hidden")},c?(e(),setTimeout(a,0)):(f.element.classList.add("animate-"+b),f.element.addEventListener("animationend",g,!1))})},a.prototype.left=function(a){var b;return b=(null!=a?a:{instant:!1}).instant,this.animate({direction:"left",instant:b})},a.prototype.right=function(a){var b;return b=(null!=a?a:{instant:!1}).instant,this.animate({direction:"right",instant:b})},a.prototype.show=function(a){var b;return b=(null!=a?a:{instant:!1}).instant,this.animate({direction:"center",instant:b})},a}();var h,i,f=function(a,b){return function(){return a.apply(b,arguments)}},j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};return h=function(a){function b(){return this.click=f(this.click,this),this.register=f(this.register,this),i=b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.options={animationDuration:200,paneAttribute:"bo-pane",paneTriggerAttribute:"bo-trigger",change:function(){}},b.prototype.events={"touchstart click":"click"},b.prototype.panes={},b.prototype.initialize=function(a){var b,d=this;return c.extend(this.options,a),this.model.on("set:active",function(a,b){return b?d.options.change.call(d,b):void 0}),this.model.set("active",null),b=document.querySelectorAll("["+this.options.paneAttribute+"]"),c.each(b,this.register),this.hideAll().then(function(){var a;return a=c.one(d.panes),a?d.show(a):void 0})},b.prototype.displayBlock=function(){return this.iterate(function(a){})},b.prototype.register=function(a){var b,d;return b="String"==typeof a||"Number"==typeof a?{id:a}:{element:a},b=c.extend(b,this.options),d=new g(b),this.panes[d.id]=d},b.prototype.iterate=function(a){return c.each(this.panes,a)},b.prototype.hideAll=function(){var a=this;return Promise.all(Object.keys(this.panes).map(function(b){return a.panes[b]}).map(function(a){return a.right({instant:!0})}))},b.prototype.show=function(a){var b,c,d;if(c=this.panes[a],d=this.model.get("active"),!c)throw new ReferenceError('Pane with ID "'+a+'" does not exist in the DOM, or is not registered with Bo.');return d?(b=c.index,b>d.index?c.right({instant:!0}).then(function(){return Promise.all([d.left(),c.show()])}):c.left({instant:!0}).then(function(){return Promise.all([d.right(),c.show()])})):c.show({instant:!0}),this.model.set("active",c)},b.prototype.click=function(a){var b;return b=a.target.getAttribute(this.options.paneTriggerAttribute),b?(a.preventDefault(),this.show(b)):void 0},b}(e)});