// Generated by CoffeeScript 1.6.3
var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

define(function(require, exports, module) {
  var Bo, Pane;
  Pane = require('bo.pane');
  return Bo = (function() {
    Bo.prototype.options = {
      paneAttribute: 'data-bo-pane',
      paneTriggerAttribute: 'data-bo-trigger-pane'
    };

    Bo.prototype.panes = {};

    Bo.prototype.state = {};

    function Bo() {
      this.click = __bind(this.click, this);
      var element, panes, _i, _len;
      panes = document.querySelectorAll('[' + this.options.paneAttribute + ']');
      for (_i = 0, _len = panes.length; _i < _len; _i++) {
        element = panes[_i];
        this.registerPane(element);
      }
      this.showFirst();
      document.addEventListener('click', this.click);
    }

    Bo.prototype.get = function(key) {
      return this.state[key];
    };

    Bo.prototype.set = function(key, value) {
      return this.state[key] = value;
    };

    Bo.prototype.registerPane = function(element) {
      var pane;
      if (typeof element === 'String' || typeof element === 'Number') {
        pane = new Pane({
          id: element
        });
        return this.panes[element] = pane;
      } else {
        pane = new Pane({
          element: element
        });
        return this.panes[pane.id] = pane;
      }
    };

    Bo.prototype.hideAll = function() {
      var id, pane, _ref, _results;
      _ref = this.panes;
      _results = [];
      for (id in _ref) {
        pane = _ref[id];
        _results.push(pane.hide());
      }
      return _results;
    };

    Bo.prototype.showFirst = function() {
      var id, _results;
      _results = [];
      for (id in this.panes) {
        this.show(id);
        break;
      }
      return _results;
    };

    Bo.prototype.show = function(id) {
      if (this.panes[id] == null) {
        console.error('Bo.show called with unregistered pane "' + id + '". Be sure to register it first!');
      }
      this.hideAll();
      this.panes[id].show();
      return this.set('active', id);
    };

    Bo.prototype.click = function(event) {
      var id;
      id = event.target.getAttribute(this.options.paneTriggerAttribute);
      if (id) {
        event.preventDefault();
        return this.show(id);
      }
    };

    return Bo;

  })();
});
